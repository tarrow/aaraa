webpackJsonp([1],{111:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(82),n=a.n(i),o=a(22),r=a(85),s=(a.n(r),a(83)),d=(a.n(s),a(36)),l=a.n(d),u=a(21),c=a.n(u),p=a(81),m=a(84),f=a.n(m);o.default.config.productionTip=!1;var h=[],v={log:[]},w=function(t){l.a.get(t).then(function(t){var e=p.a.dictToDisplay(t.data);g(e)})},g=function(t){h.push.apply(h,t.display),v=c.a.cloneDeep(t.metadata)},y=function(t){var e=c.a.get(t,"wikidata.labels.en.value");void 0!==e&&h.push({wikidata:t.text,contentmine:k(),name:e,term:e})},D=function(t){v.log.push({type:"wdqs",query:t,time:Date.now()})},b=function(t){v.log.push({type:"pagepile",id:t,time:Date.now()})},k=function(){var t=h.map(function(t){return parseInt(t.contentmine.match(/(\d+)$/)[0])}),e=c.a.max(t);void 0===e&&(e=-1);var a=parseInt(e)+1;return"CM."+v.id+a};o.default.component("wikidata",{props:["data"],template:'<a v-bind:href="wUrl">{{data.wikidata}}</a>',computed:{wUrl:function(){return"https://wikidata.org/wiki/"+this.data.wikidata}}}),o.default.component("modal",f.a),o.default.use(r.ClientTable),new o.default({el:"#app",data:{showModal:!1,downloadContent:null,showDictSelector:!0,showTable:!1,columns:["contentmine","term","name","wikidata"],tableData:h,metadata:v,options:{templates:{wikidata:"wikidata"},customFilters:[{name:"prefix",callback:function(t,e){return c.a.upperCase(t.term[0])===e}}]},dicts:[{name:"Cochrane",url:"https://rawgit.com/ContentMine/dictionaries/master/json/cochrane.json"},{name:"Wikidata Country",url:"https://rawgit.com/ContentMine/dictionaries/master/json/wikidatacountry.json"},{name:"insecticides",url:"https://rawgit.com/ContentMine/dictionaries/master/json/insecticides.json"},{name:"disease",url:"https://rawgit.com/ContentMine/dictionaries/master/json/disease.json"}],prefixes:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},methods:{dictLoad:function(t){w(t.url),this.showDictSelector=!1,this.showTable=!0},prefixFilter:function(t){r.Event.$emit("vue-tables.filter::prefix",t)},startDownload:function(){this.downloadContent="data:application/json;charset=utf-8,"+encodeURIComponent(n()(p.a.displayToDict(this.tableData,this.metadata),null,4))},newDict:function(){this.showDictSelector=!1,this.showTable=!0},loadDictionary:function(t){var e=new window.FileReader,a=this;e.onload=function(t){var e=p.a.dictToDisplay(JSON.parse(t.target.result));g(e),a.showDictSelector=!1,a.showTable=!0},e.readAsText(t.target.files[0])}}}).$on("newentity",y).$on("updateQuery",D).$on("updatePagePile",b)},112:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(113),n=a.n(i),o=a(36),r=a.n(o),s=a(289),d=a.n(s),l=a(21),u=a.n(l),c=a(172),p=a.n(c);e.default={name:"modal",methods:{emitNewEntries:function(t){var e=this,a=d.a.getManyEntities(t),i=a.map(function(t){return r.a.get(t)});return r.a.all(i).then(function(t){var a={};t.map(function(t){u.a.merge(a,t.data.entities)}),u.a.forEach(a,function(t,a){e.$parent.$emit("newentity",{wikidata:t,text:a})}),e.$emit("close")})},doSparqlQuery:function(){var t=function(t){return"%"+t.charCodeAt(0).toString(16)},e=encodeURIComponent(this.queryString).replace(/[!'()*]/g,t),a=this;r.a.get("https://query.wikidata.org/sparql?format=json&query="+e).then(function(t){var e=d.a.simplifySparqlResults(t.data);return n.a.resolve(e)}).then(this.emitNewEntries).then(this.$parent.$emit("updateQuery",a.queryString))},doPagePile:function(){var t=this;p()("https://tools.wmflabs.org/pagepile/api.php?id="+this.pagePileID+"&action=get_data&doit&format=json",null,function(e,a){e?console.error(e.message):(t.emitNewEntries(a.pages),t.$parent.$emit("updatePagePile",t.pagePileID))})}},data:function(){return{queryString:void 0,pagePileID:void 0}}}},156:function(t,e){},196:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n          Add Items to Dictionary\n        ")])],2),t._v(" "),a("div",{staticClass:"modal-body"},[t._t("body",[a("form",{on:{submit:function(e){e.preventDefault(),t.doSparqlQuery(e)}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.queryString,expression:"queryString"}],staticStyle:{height:"100%"},attrs:{name:"sparql_query",id:"sparql_query",placeholder:"Paste your query here where the ?item parameter returns all the items you want in the dictionary"},domProps:{value:t.queryString},on:{input:function(e){e.target.composing||(t.queryString=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Run Query")])]),t._v(" "),a("form",{on:{submit:function(e){e.preventDefault(),t.doPagePile(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pagePileID,expression:"pagePileID"}],attrs:{placeholder:"PagePile ID"},domProps:{value:t.pagePileID},on:{input:function(e){e.target.composing||(t.pagePileID=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Run PagePile")])])])],2),t._v(" "),a("div",{staticClass:"modal-footer"},[t._t("footer",[a("button",{staticClass:"btn btn-danger modal-default-button",on:{click:function(e){t.$emit("close")}}},[t._v("\n            Close\n          ")])])],2)])])])},staticRenderFns:[]}},81:function(t,e,a){"use strict";var i=a(21),n=a.n(i),o=function(t){var e={id:t.id};return{display:t.entries.map(function(t){var e=n.a.cloneDeep(n.a.omit(t,"identifiers"));return e.contentmine=t.identifiers.contentmine,void 0!==t.identifiers.wikidata&&(e.wikidata=t.identifiers.wikidata),e}),metadata:e}},r=function(t,e){var a={};return a.id=e.id,a.log=e.log,a.entries=t.map(function(t){var e=n.a.cloneDeep(n.a.omit(t,["wikidata","contentmine"]));return e.identifiers={},e.identifiers.contentmine=t.contentmine,void 0!==t.wikidata&&(e.identifiers.wikidata=t.wikidata),e}),a},s={displayToDict:r,dictToDisplay:o};e.a=s},83:function(t,e){},84:function(t,e,a){function i(t){a(156)}var n=a(195)(a(112),a(196),i,"data-v-2d82d72a",null);t.exports=n.exports}},[111]);
//# sourceMappingURL=app.19498ababdc99643d1e3.js.map
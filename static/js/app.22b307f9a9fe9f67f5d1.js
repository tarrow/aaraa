webpackJsonp([1],{111:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(83),i=n.n(a),o=n(21),r=n(86),s=(n.n(r),n(84)),d=(n.n(s),n(36)),u=n.n(d),l=n(37),c=n.n(l),m=n(82),p=n.n(m),f=n(85),v=n.n(f);o.default.config.productionTip=!1;var h=[],w={},y=function(t){u.a.get(t).then(function(t){var e=p.a.dictToDisplay(t.data);h.push.apply(h,e.display),w.id=e.metadata.id})},g=function(t){var e=c.a.get(t,"wikidata.labels.en.value");void 0!==e&&h.push({wikidata:t.text,contentmine:b(),name:e,term:e})},b=function(){var t=h.map(function(t){return parseInt(t.contentmine.match(/(\d+)$/)[0])}),e=c.a.max(t);void 0===e&&(e=-1);var n=parseInt(e)+1;return"CM."+w.id+n};o.default.component("wikidata",{props:["data"],template:'<a v-bind:href="wUrl">{{data.wikidata}}</a>',computed:{wUrl:function(){return"https://wikidata.org/wiki/"+this.data.wikidata}}}),o.default.component("modal",v.a),o.default.use(r.ClientTable),new o.default({el:"#app",data:{showModal:!1,downloadContent:null,showDictSelector:function(){return!0},showTable:function(){return!1},columns:["contentmine","term","name","wikidata"],tableData:h,metadata:w,options:{templates:{wikidata:"wikidata"},customFilters:[{name:"prefix",callback:function(t,e){return c.a.upperCase(t.term[0])===e}}]},dicts:[{name:"Cochrane",url:"https://rawgit.com/ContentMine/dictionaries/master/json/cochrane.json"},{name:"Wikidata Country",url:"https://rawgit.com/ContentMine/dictionaries/master/json/wikidatacountry.json"},{name:"insecticides",url:"https://rawgit.com/ContentMine/dictionaries/master/json/insecticides.json"},{name:"disease",url:"https://rawgit.com/ContentMine/dictionaries/master/json/disease.json"}],prefixes:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},methods:{dictLoad:function(t){y(t.url),this.showDictSelector=!1,this.showTable=!0},prefixFilter:function(t){r.Event.$emit("vue-tables.filter::prefix",t)},startDownload:function(){this.downloadContent="data:application/json;charset=utf-8,"+encodeURIComponent(i()(p.a.displayToDict(this.tableData,this.metadata.id)))},newDict:function(){this.showDictSelector=!1,this.showTable=!0}}}).$on("newentity",g)},112:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(113),i=n.n(a),o=n(36),r=n.n(o),s=n(282),d=n.n(s),u=n(37),l=n.n(u);e.default={name:"modal",methods:{doSparqlQuery:function(){var t=this,e=function(t){return"%"+t.charCodeAt(0).toString(16)},n=encodeURIComponent(this.queryString).replace(/[!'()*]/g,e);r.a.get("https://query.wikidata.org/sparql?format=json&query="+n).then(function(t){var e=d.a.getManyEntities(d.a.simplifySparqlResults(t.data)),n=e.map(function(t){return r.a.get(t)});return i.a.resolve(n)}).then(r.a.all).then(function(e){var n={};e.map(function(t){l.a.merge(n,t.data.entities)}),l.a.forEach(n,function(e,n){t.$parent.$emit("newentity",{wikidata:e,text:n})})})}},data:function(){return{queryString:void 0,pagePileID:void 0}}}},153:function(t,e){},189:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container"},[n("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n          Add Items to Dictionary\n        ")])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("body",[n("form",{on:{submit:function(e){e.preventDefault(),t.doSparqlQuery(e)}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.queryString,expression:"queryString"}],staticStyle:{height:"100%"},attrs:{name:"sparql_query",id:"sparql_query",placeholder:"Paste your query here where the ?item parameter returns all the items you want in the dictionary"},domProps:{value:t.queryString},on:{input:function(e){e.target.composing||(t.queryString=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Run Query")])]),t._v(" "),n("form",{on:{submit:function(e){e.preventDefault(),t.doPagePile(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pagePileID,expression:"pagePileID"}],attrs:{placeholder:"PagePile ID"},domProps:{value:t.pagePileID},on:{input:function(e){e.target.composing||(t.pagePileID=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Run PagePile")])])])],2),t._v(" "),n("div",{staticClass:"modal-footer"},[t._t("footer",[n("button",{staticClass:"btn btn-danger modal-default-button",on:{click:function(e){t.$emit("close")}}},[t._v("\n            Close\n          ")])])],2)])])])},staticRenderFns:[]}},82:function(t,e){var n=function(t){var e=[],n={id:t.id};return t.entries.map(function(t){t.contentmine=t.identifiers.contentmine,void 0!==t.identifiers.wikidata&&(t.wikidata=t.identifiers.wikidata),t.identifiers=null,delete t.identifiers,e.push(t)}),{display:e,metadata:n}},a=function(t,e){var n={};return n.id=e.id,n.entries=[],t.map(function(t){t.identifiers={},t.identifiers.contentmine=t.contentmine,void 0!==t.wikidata&&(t.identifiers.wikidata=t.wikidata),t.contentmine=null,t.wikidata=null,delete t.contentmine,delete t.wikidata,n.entries.push(t)}),n},i={displayToDict:a,dictToDisplay:n};t.exports=i},84:function(t,e){},85:function(t,e,n){function a(t){n(153)}var i=n(188)(n(112),n(189),a,"data-v-2d82d72a",null);t.exports=i.exports}},[111]);
//# sourceMappingURL=app.22b307f9a9fe9f67f5d1.js.map
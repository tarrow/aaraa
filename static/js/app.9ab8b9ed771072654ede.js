webpackJsonp([1],{111:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(83),a=n.n(i),o=n(21),r=n(86),s=(n.n(r),n(84)),d=(n.n(s),n(36)),c=n.n(d),u=n(37),l=n.n(u),m=n(82),p=n.n(m),f=n(85),v=n.n(f);o.default.config.productionTip=!1;var h=[],w={},y=function(t){c.a.get(t).then(function(t){var e=p.a.dictToDisplay(t.data);h.push.apply(h,e.display),w=e.metadata})},g=function(t){var e=l.a.get(t,"wikidata.labels.en.value");void 0!==e&&h.push({wikidata:t.text,contentmine:k(),name:e,term:e})},k=function(){var t=h.map(function(t){return parseInt(t.contentmine.match(/(\d+)$/)[0])}),e=l.a.max(t);return void 0===e&&(e=-1),console.log(e),"CM.foo"+(parseInt(e)+1)};o.default.component("wikidata",{props:["data"],template:'<a v-bind:href="wUrl">{{data.wikidata}}</a>',computed:{wUrl:function(){return"https://wikidata.org/wiki/"+this.data.wikidata}}}),o.default.component("modal",v.a),o.default.use(r.ClientTable),new o.default({el:"#app",data:{showModal:!1,downloadContent:null,showDictSelector:function(){return!0},columns:["contentmine","term","name","wikidata"],tableData:h,options:{templates:{wikidata:"wikidata"},customFilters:[{name:"prefix",callback:function(t,e){return l.a.upperCase(t.term[0])===e}}]},dicts:[{name:"Cochrane",url:"https://rawgit.com/ContentMine/dictionaries/master/json/cochrane.json"},{name:"Wikidata Country",url:"https://rawgit.com/ContentMine/dictionaries/master/json/wikidatacountry.json"},{name:"insecticides",url:"https://rawgit.com/ContentMine/dictionaries/master/json/insecticides.json"},{name:"disease",url:"https://rawgit.com/ContentMine/dictionaries/master/json/disease.json"}],prefixes:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},methods:{dictLoad:function(t){y(t.url),this.showDictSelector=!1},prefixFilter:function(t){r.Event.$emit("vue-tables.filter::prefix",t)},startDownload:function(){this.downloadContent="data:application/json;charset=utf-8,"+encodeURIComponent(a()(p.a.displayToDict(this.tableData,w.id)))}}}).$on("newentity",g)},112:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(113),a=n.n(i),o=n(36),r=n.n(o),s=n(282),d=n.n(s),c=n(37),u=n.n(c);e.default={name:"modal",methods:{doSparqlQuery:function(){var t=this,e=function(t){return"%"+t.charCodeAt(0).toString(16)},n=encodeURIComponent(this.queryString).replace(/[!'()*]/g,e);r.a.get("https://query.wikidata.org/sparql?format=json&query="+n).then(function(t){var e=d.a.getManyEntities(d.a.simplifySparqlResults(t.data)),n=e.map(function(t){return r.a.get(t)});return a.a.resolve(n)}).then(r.a.all).then(function(e){var n={};e.map(function(t){u.a.merge(n,t.data.entities)}),u.a.forEach(n,function(e,n){t.$parent.$emit("newentity",{wikidata:e,text:n})})})}},data:function(){return{queryString:void 0}}}},153:function(t,e){},189:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container"},[n("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n          Add Items to Dictionary\n        ")])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("body",[n("form",{on:{submit:function(e){e.preventDefault(),t.doSparqlQuery(e)}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.queryString,expression:"queryString"}],staticStyle:{height:"100%"},attrs:{name:"sparql_query",id:"sparql_query",placeholder:"Paste your query here where the ?item parameter returns all the items you want in the dictionary"},domProps:{value:t.queryString},on:{input:function(e){e.target.composing||(t.queryString=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Run Query")])])])],2),t._v(" "),n("div",{staticClass:"modal-footer"},[t._t("footer",[n("button",{staticClass:"btn btn-danger modal-default-button",on:{click:function(e){t.$emit("close")}}},[t._v("\n            Close\n          ")])])],2)])])])},staticRenderFns:[]}},82:function(t,e){var n=function(t){var e=[],n={id:t.id};return t.entries.map(function(t){t.contentmine=t.identifiers.contentmine,void 0!==t.identifiers.wikidata&&(t.wikidata=t.identifiers.wikidata),t.identifiers=null,delete t.identifiers,e.push(t)}),{display:e,metadata:n}},i=function(t,e){var n={};return n.id=e.id,n.entries=[],t.map(function(t){t.identifiers={},t.identifiers.contentmine=t.contentmine,void 0!==t.wikidata&&(t.identifiers.wikidata=t.wikidata),t.contentmine=null,t.wikidata=null,delete t.contentmine,delete t.wikidata,n.entries.push(t)}),n},a={displayToDict:i,dictToDisplay:n};t.exports=a},84:function(t,e){},85:function(t,e,n){function i(t){n(153)}var a=n(188)(n(112),n(189),i,"data-v-2d82d72a",null);t.exports=a.exports}},[111]);
//# sourceMappingURL=app.9ab8b9ed771072654ede.js.map
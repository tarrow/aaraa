webpackJsonp([1],{111:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(82),a=i.n(n),o=i(21),r=i(85),s=(i.n(r),i(83)),d=(i.n(s),i(35)),l=i.n(d),u=i(36),c=i.n(u),m=i(81),p=i.n(m),f=i(84),v=i.n(f);o.default.config.productionTip=!1;var h=[],w={},g=function(t){l.a.get(t).then(function(t){var e=p.a.dictToDisplay(t.data);h.push.apply(h,e.display),w.id=e.metadata.id})},y=function(t){var e=c.a.get(t,"wikidata.labels.en.value");void 0!==e&&h.push({wikidata:t.text,contentmine:b(),name:e,term:e})},b=function(){var t=h.map(function(t){return parseInt(t.contentmine.match(/(\d+)$/)[0])}),e=c.a.max(t);void 0===e&&(e=-1);var i=parseInt(e)+1;return"CM."+w.id+i};o.default.component("wikidata",{props:["data"],template:'<a v-bind:href="wUrl">{{data.wikidata}}</a>',computed:{wUrl:function(){return"https://wikidata.org/wiki/"+this.data.wikidata}}}),o.default.component("modal",v.a),o.default.use(r.ClientTable),new o.default({el:"#app",data:{showModal:!1,downloadContent:null,showDictSelector:function(){return!0},showTable:function(){return!1},columns:["contentmine","term","name","wikidata"],tableData:h,metadata:w,options:{templates:{wikidata:"wikidata"},customFilters:[{name:"prefix",callback:function(t,e){return c.a.upperCase(t.term[0])===e}}]},dicts:[{name:"Cochrane",url:"https://rawgit.com/ContentMine/dictionaries/master/json/cochrane.json"},{name:"Wikidata Country",url:"https://rawgit.com/ContentMine/dictionaries/master/json/wikidatacountry.json"},{name:"insecticides",url:"https://rawgit.com/ContentMine/dictionaries/master/json/insecticides.json"},{name:"disease",url:"https://rawgit.com/ContentMine/dictionaries/master/json/disease.json"}],prefixes:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},methods:{dictLoad:function(t){g(t.url),this.showDictSelector=!1,this.showTable=!0},prefixFilter:function(t){r.Event.$emit("vue-tables.filter::prefix",t)},startDownload:function(){this.downloadContent="data:application/json;charset=utf-8,"+encodeURIComponent(a()(p.a.displayToDict(this.tableData,this.metadata.id)))},newDict:function(){this.showDictSelector=!1,this.showTable=!0}}}).$on("newentity",y)},112:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(113),a=i.n(n),o=i(35),r=i.n(o),s=i(289),d=i.n(s),l=i(36),u=i.n(l),c=i(172),m=i.n(c);e.default={name:"modal",methods:{emitNewEntries:function(t){var e=this,i=d.a.getManyEntities(t),n=i.map(function(t){return r.a.get(t)});r.a.all(n).then(function(t){var i={};t.map(function(t){u.a.merge(i,t.data.entities)}),u.a.forEach(i,function(t,i){e.$parent.$emit("newentity",{wikidata:t,text:i})})})},doSparqlQuery:function(){var t=function(t){return"%"+t.charCodeAt(0).toString(16)},e=encodeURIComponent(this.queryString).replace(/[!'()*]/g,t);r.a.get("https://query.wikidata.org/sparql?format=json&query="+e).then(function(t){var e=d.a.simplifySparqlResults(t.data);return a.a.resolve(e)}).then(this.emitNewEntries)},doPagePile:function(){var t=this;m()("https://tools.wmflabs.org/pagepile/api.php?id="+this.pagePileID+"&action=get_data&doit&format=json",null,function(e,i){e?console.error(e.message):t.emitNewEntries(i.pages)})}},data:function(){return{queryString:void 0,pagePileID:void 0}}}},156:function(t,e){},196:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper"},[i("div",{staticClass:"modal-container"},[i("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n          Add Items to Dictionary\n        ")])],2),t._v(" "),i("div",{staticClass:"modal-body"},[t._t("body",[i("form",{on:{submit:function(e){e.preventDefault(),t.doSparqlQuery(e)}}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.queryString,expression:"queryString"}],staticStyle:{height:"100%"},attrs:{name:"sparql_query",id:"sparql_query",placeholder:"Paste your query here where the ?item parameter returns all the items you want in the dictionary"},domProps:{value:t.queryString},on:{input:function(e){e.target.composing||(t.queryString=e.target.value)}}}),t._v(" "),i("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Run Query")])]),t._v(" "),i("form",{on:{submit:function(e){e.preventDefault(),t.doPagePile(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.pagePileID,expression:"pagePileID"}],attrs:{placeholder:"PagePile ID"},domProps:{value:t.pagePileID},on:{input:function(e){e.target.composing||(t.pagePileID=e.target.value)}}}),t._v(" "),i("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Run PagePile")])])])],2),t._v(" "),i("div",{staticClass:"modal-footer"},[t._t("footer",[i("button",{staticClass:"btn btn-danger modal-default-button",on:{click:function(e){t.$emit("close")}}},[t._v("\n            Close\n          ")])])],2)])])])},staticRenderFns:[]}},81:function(t,e){var i=function(t){var e=[],i={id:t.id};return t.entries.map(function(t){t.contentmine=t.identifiers.contentmine,void 0!==t.identifiers.wikidata&&(t.wikidata=t.identifiers.wikidata),t.identifiers=null,delete t.identifiers,e.push(t)}),{display:e,metadata:i}},n=function(t,e){var i={};return i.id=e.id,i.entries=[],t.map(function(t){t.identifiers={},t.identifiers.contentmine=t.contentmine,void 0!==t.wikidata&&(t.identifiers.wikidata=t.wikidata),t.contentmine=null,t.wikidata=null,delete t.contentmine,delete t.wikidata,i.entries.push(t)}),i},a={displayToDict:n,dictToDisplay:i};t.exports=a},83:function(t,e){},84:function(t,e,i){function n(t){i(156)}var a=i(195)(i(112),i(196),n,"data-v-2d82d72a",null);t.exports=a.exports}},[111]);
//# sourceMappingURL=app.f8da018050c336092e9f.js.map
{"version":3,"sources":["webpack:///static/js/app.6a022253d9153561f7fb.js","webpack:///./src/main.js","webpack:///Modal.vue","webpack:///./src/components/Modal.vue?e439","webpack:///./src/lib/serialize.js","webpack:///./src/components/Modal.vue?700a"],"names":["webpackJsonp","111","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1_vue__","__WEBPACK_IMPORTED_MODULE_2_vue_tables_2__","__WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_min_css__","__WEBPACK_IMPORTED_MODULE_4_axios__","__WEBPACK_IMPORTED_MODULE_4_axios___default","__WEBPACK_IMPORTED_MODULE_5_lodash__","__WEBPACK_IMPORTED_MODULE_5_lodash___default","__WEBPACK_IMPORTED_MODULE_6__lib_serialize__","__WEBPACK_IMPORTED_MODULE_7__components_Modal__","__WEBPACK_IMPORTED_MODULE_7__components_Modal___default","config","productionTip","data","metadata","getAndLoadDict","url","a","get","then","response","displayData","dictToDisplay","push","apply","display","id","addEntry","entry","term","undefined","wikidata","text","contentmine","getNextID","name","ids","map","row","parseInt","match","max","newid","component","props","template","computed","wUrl","this","use","el","showModal","downloadContent","showDictSelector","showTable","columns","tableData","options","templates","customFilters","callback","query","upperCase","dicts","prefixes","methods","dictLoad","dict","prefixFilter","prefix","$emit","startDownload","encodeURIComponent","displayToDict","newDict","$on","112","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_1_axios__","__WEBPACK_IMPORTED_MODULE_1_axios___default","__WEBPACK_IMPORTED_MODULE_2_wikidata_sdk__","__WEBPACK_IMPORTED_MODULE_2_wikidata_sdk___default","__WEBPACK_IMPORTED_MODULE_3_lodash__","__WEBPACK_IMPORTED_MODULE_3_lodash___default","__WEBPACK_IMPORTED_MODULE_4_jsonp__","__WEBPACK_IMPORTED_MODULE_4_jsonp___default","emitNewEntries","wids","_this","urls","getManyEntities","downloadPromises","all","responses","entities","merge","forEach","key","$parent","doSparqlQuery","encodeCharacter","c","charCodeAt","toString","escapedQueryString","queryString","replace","simplifySparqlResults","resolve","doPagePile","me","pagePileID","err","console","error","message","pages","156","exports","196","render","_vm","_h","$createElement","_c","_self","staticClass","_t","_v","on","submit","$event","preventDefault","directives","rawName","expression","staticStyle","height","attrs","placeholder","domProps","input","target","composing","type","click","staticRenderFns","81","__WEBPACK_IMPORTED_MODULE_0_lodash__","__WEBPACK_IMPORTED_MODULE_0_lodash___default","entries","x","y","cloneDeep","omit","identifiers","serialize","83","84","injectStyle","ssrContext","Component"],"mappings":"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","file":"static/js/app.6a022253d9153561f7fb.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 111:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_tables_2__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_tables_2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_vue_tables_2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_min_css__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_min_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_min_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_axios__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__lib_serialize__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_Modal__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_Modal___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__components_Modal__);\n\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].config.productionTip = false;\n\nvar data = [];\nvar metadata = {};\nvar getAndLoadDict = function getAndLoadDict(url) {\n  __WEBPACK_IMPORTED_MODULE_4_axios___default.a.get(url).then(function (response) {\n    var displayData = __WEBPACK_IMPORTED_MODULE_6__lib_serialize__[\"a\" /* default */].dictToDisplay(response.data);\n    data.push.apply(data, displayData.display);\n    metadata.id = displayData.metadata.id;\n  });\n};\n\nvar addEntry = function addEntry(entry) {\n  var term = __WEBPACK_IMPORTED_MODULE_5_lodash___default.a.get(entry, 'wikidata.labels.en.value');\n  if (!(term === undefined)) {\n    data.push({\n      wikidata: entry.text,\n      contentmine: getNextID(),\n      name: term,\n      term: term\n    });\n  }\n};\n\nvar getNextID = function getNextID() {\n  var ids = data.map(function (row) {\n    return parseInt(row.contentmine.match(/(\\d+)$/)[0]);\n  });\n  var max = __WEBPACK_IMPORTED_MODULE_5_lodash___default.a.max(ids);\n  if (max === undefined) max = -1;\n  var newid = parseInt(max) + 1;\n  return 'CM.' + metadata.id + newid;\n};\n\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].component('wikidata', {\n  props: ['data'],\n  template: '<a v-bind:href=\"wUrl\">{{data.wikidata}}</a>',\n  computed: {\n    wUrl: function wUrl() {\n      return 'https://wikidata.org/wiki/' + this.data.wikidata;\n    }\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].component('modal', __WEBPACK_IMPORTED_MODULE_7__components_Modal___default.a);\n\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_2_vue_tables_2__[\"ClientTable\"]);\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"]({\n  el: '#app',\n  data: {\n    showModal: false,\n    downloadContent: null,\n    showDictSelector: true,\n    showTable: false,\n    columns: ['contentmine', 'term', 'name', 'wikidata'],\n    tableData: data,\n    metadata: metadata,\n    options: {\n      templates: {\n        wikidata: 'wikidata'\n      },\n      customFilters: [{\n        name: 'prefix',\n        callback: function callback(row, query) {\n          return __WEBPACK_IMPORTED_MODULE_5_lodash___default.a.upperCase(row.term[0]) === query;\n        }\n      }]\n    },\n    dicts: [{ name: 'Cochrane', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/cochrane.json' }, { name: 'Wikidata Country', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/wikidatacountry.json' }, { name: 'insecticides', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/insecticides.json' }, { name: 'disease', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/disease.json' }],\n    prefixes: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n  },\n  methods: {\n    dictLoad: function dictLoad(dict) {\n      getAndLoadDict(dict.url);\n      this.showDictSelector = false;\n      this.showTable = true;\n    },\n    prefixFilter: function prefixFilter(prefix) {\n      __WEBPACK_IMPORTED_MODULE_2_vue_tables_2__[\"Event\"].$emit('vue-tables.filter::prefix', prefix);\n    },\n    startDownload: function startDownload() {\n      this.downloadContent = 'data:application/json;charset=utf-8,' + encodeURIComponent(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(__WEBPACK_IMPORTED_MODULE_6__lib_serialize__[\"a\" /* default */].displayToDict(this.tableData, this.metadata)));\n    },\n    newDict: function newDict() {\n      this.showDictSelector = false;\n      this.showTable = true;\n    }\n  }\n}).$on('newentity', addEntry);\n\n/***/ }),\n\n/***/ 112:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_wikidata_sdk__ = __webpack_require__(289);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_wikidata_sdk___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_wikidata_sdk__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jsonp__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jsonp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_jsonp__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'modal',\n  methods: {\n    emitNewEntries: function emitNewEntries(wids) {\n      var _this = this;\n\n      var urls = __WEBPACK_IMPORTED_MODULE_2_wikidata_sdk___default.a.getManyEntities(wids);\n      var downloadPromises = urls.map(function (url) {\n        return __WEBPACK_IMPORTED_MODULE_1_axios___default.a.get(url);\n      });\n      __WEBPACK_IMPORTED_MODULE_1_axios___default.a.all(downloadPromises).then(function (responses) {\n        var entities = {};\n        responses.map(function (response) {\n          __WEBPACK_IMPORTED_MODULE_3_lodash___default.a.merge(entities, response.data.entities);\n        });\n        __WEBPACK_IMPORTED_MODULE_3_lodash___default.a.forEach(entities, function (value, key) {\n          _this.$parent.$emit('newentity', { wikidata: value, text: key });\n        });\n      });\n      this.$emit('close');\n    },\n    doSparqlQuery: function doSparqlQuery() {\n      // Snippet inspired by wikidata-sdk https://github.com/maxlath/wikidata-sdk/blob/master/lib/utils/utils.js\n      var encodeCharacter = function encodeCharacter(c) {\n        return '%' + c.charCodeAt(0).toString(16);\n      };\n      var escapedQueryString = encodeURIComponent(this.queryString).replace(/[!'()*]/g, encodeCharacter);\n      __WEBPACK_IMPORTED_MODULE_1_axios___default.a.get('https://query.wikidata.org/sparql?format=json&query=' + escapedQueryString).then(function (response) {\n        var wids = __WEBPACK_IMPORTED_MODULE_2_wikidata_sdk___default.a.simplifySparqlResults(response.data);\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a.resolve(wids);\n      }).then(this.emitNewEntries);\n    },\n    doPagePile: function doPagePile() {\n      var me = this;\n      __WEBPACK_IMPORTED_MODULE_4_jsonp___default()('https://tools.wmflabs.org/pagepile/api.php?id=' + this.pagePileID + '&action=get_data&doit&format=json', null, function (err, data) {\n        if (err) {\n          console.error(err.message);\n        } else {\n          me.emitNewEntries(data.pages);\n        }\n      });\n    }\n  },\n  data: function data() {\n    return {\n      queryString: undefined,\n      pagePileID: undefined\n    };\n  }\n});\n\n/***/ }),\n\n/***/ 156:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 196:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"modal-mask\"\n  }, [_c('div', {\n    staticClass: \"modal-wrapper\"\n  }, [_c('div', {\n    staticClass: \"modal-container\"\n  }, [_c('div', {\n    staticClass: \"modal-header\"\n  }, [_vm._t(\"header\", [_vm._v(\"\\n          Add Items to Dictionary\\n        \")])], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-body\"\n  }, [_vm._t(\"body\", [_c('form', {\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.doSparqlQuery($event)\n      }\n    }\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.queryString),\n      expression: \"queryString\"\n    }],\n    staticStyle: {\n      \"height\": \"100%\"\n    },\n    attrs: {\n      \"name\": \"sparql_query\",\n      \"id\": \"sparql_query\",\n      \"placeholder\": \"Paste your query here where the ?item parameter returns all the items you want in the dictionary\"\n    },\n    domProps: {\n      \"value\": (_vm.queryString)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.queryString = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"btn\",\n    attrs: {\n      \"type\": \"submit\"\n    }\n  }, [_vm._v(\"Run Query\")])]), _vm._v(\" \"), _c('form', {\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.doPagePile($event)\n      }\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.pagePileID),\n      expression: \"pagePileID\"\n    }],\n    attrs: {\n      \"placeholder\": \"PagePile ID\"\n    },\n    domProps: {\n      \"value\": (_vm.pagePileID)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.pagePileID = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"btn\",\n    attrs: {\n      \"type\": \"submit\"\n    }\n  }, [_vm._v(\"Run PagePile\")])])])], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-footer\"\n  }, [_vm._t(\"footer\", [_c('button', {\n    staticClass: \"btn btn-danger modal-default-button\",\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('close')\n      }\n    }\n  }, [_vm._v(\"\\n            Close\\n          \")])])], 2)])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n\n// transfrom from CM dictionary to flat format for display\nvar dictToDisplay = function dictToDisplay(dict) {\n  var metadata = {\n    id: dict.id\n  };\n  var display = dict.entries.map(function (x) {\n    var y = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.cloneDeep(__WEBPACK_IMPORTED_MODULE_0_lodash___default.a.omit(x, 'identifiers'));\n    y.contentmine = x.identifiers.contentmine;\n    if (!(x.identifiers.wikidata === undefined)) {\n      y.wikidata = x.identifiers.wikidata;\n    }\n    return y;\n  });\n  return { display: display, metadata: metadata };\n};\n\n// transfrom from flat display format to CM dictionary for Download\nvar displayToDict = function displayToDict(display, metadata) {\n  var dict = {};\n  dict.id = metadata.id;\n  dict.entries = display.map(function (x) {\n    var y = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.cloneDeep(__WEBPACK_IMPORTED_MODULE_0_lodash___default.a.omit(x, ['wikidata', 'contentmine']));\n    y.identifiers = {};\n    y.identifiers.contentmine = x.contentmine;\n    if (!(x.wikidata === undefined)) {\n      y.identifiers.wikidata = x.wikidata;\n    }\n    return y;\n  });\n  return dict;\n};\n\nvar serialize = {\n  displayToDict: displayToDict,\n  dictToDisplay: dictToDisplay\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (serialize);\n\n/***/ }),\n\n/***/ 83:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 84:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(156)\n}\nvar Component = __webpack_require__(195)(\n  /* script */\n  __webpack_require__(112),\n  /* template */\n  __webpack_require__(196),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-2d82d72a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n},[111]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.6a022253d9153561f7fb.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport {ClientTable, Event} from 'vue-tables-2'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport axios from 'axios'\nimport _ from 'lodash'\nimport serialize from './lib/serialize'\nimport Modal from './components/Modal'\n\nVue.config.productionTip = false\n\nvar data = []\nvar metadata = {}\nvar getAndLoadDict = function (url) {\n  axios.get(url).then((response) => {\n    var displayData = serialize.dictToDisplay(response.data)\n    data.push.apply(data, displayData.display)\n    metadata.id = displayData.metadata.id\n  })\n}\n\nvar addEntry = function (entry) {\n  var term = _.get(entry, 'wikidata.labels.en.value')\n  if (!(term === undefined)) {\n    data.push({\n      wikidata: entry.text,\n      contentmine: getNextID(),\n      name: term,\n      term\n    })\n  }\n}\n\nvar getNextID = function () {\n  var ids = data.map((row) => {\n    return parseInt(row.contentmine.match(/(\\d+)$/)[0])\n  })\n  var max = _.max(ids)\n  if (max === undefined) max = -1\n  var newid = parseInt(max) + 1\n  return 'CM.' + metadata.id + newid\n}\n\nVue.component('wikidata', {\n  props: ['data'],\n  template: '<a v-bind:href=\"wUrl\">{{data.wikidata}}</a>',\n  computed: {\n    wUrl () {\n      return 'https://wikidata.org/wiki/' + this.data.wikidata\n    }\n  }\n})\n\nVue.component('modal', Modal)\n\nVue.use(ClientTable)\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  data: {\n    showModal: false,\n    downloadContent: null,\n    showDictSelector: true,\n    showTable: false,\n    columns: ['contentmine', 'term', 'name', 'wikidata'],\n    tableData: data,\n    metadata: metadata,\n    options: {\n      templates: {\n        wikidata: 'wikidata'\n      },\n      customFilters: [{\n        name: 'prefix',\n        callback: (row, query) => {\n          return _.upperCase(row.term[0]) === query\n        }\n      }]\n    },\n    dicts: [\n      {name: 'Cochrane', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/cochrane.json'},\n      {name: 'Wikidata Country', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/wikidatacountry.json'},\n      {name: 'insecticides', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/insecticides.json'},\n      {name: 'disease', url: 'https://rawgit.com/ContentMine/dictionaries/master/json/disease.json'}\n    ],\n    prefixes: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n  },\n  methods: {\n    dictLoad (dict) {\n      getAndLoadDict(dict.url)\n      this.showDictSelector = false\n      this.showTable = true\n    },\n    prefixFilter (prefix) {\n      Event.$emit('vue-tables.filter::prefix', prefix)\n    },\n    startDownload () {\n      this.downloadContent = 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(serialize.displayToDict(this.tableData, this.metadata)))\n    },\n    newDict () {\n      this.showDictSelector = false\n      this.showTable = true\n    }\n  }\n})\n.$on('newentity', addEntry)\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","# Inspired by and using demo code from https://vuejs.org/v2/examples/modal.html\n    \n    <template>\n    <div class=\"modal-mask\">\n      <div class=\"modal-wrapper\">\n        <div class=\"modal-container\">\n\n          <div class=\"modal-header\">\n            <slot name=\"header\">\n              Add Items to Dictionary\n            </slot>\n          </div>\n\n          <div class=\"modal-body\">\n            <slot name=\"body\">\n              <form @submit.prevent=\"doSparqlQuery\">\n                  <textarea style=\"height: 100%;\" name=\"sparql_query\" id=\"sparql_query\" placeholder=\"Paste your query here where the ?item parameter returns all the items you want in the dictionary\" v-model=\"queryString\"></textarea>\n                  <button class=\"btn\" type=\"submit\">Run Query</button>\n              </form>\n              <form @submit.prevent=\"doPagePile\">\n                <input v-model=\"pagePileID\" placeholder=\"PagePile ID\">\n                <button class=\"btn\" type=\"submit\">Run PagePile</button>\n              </form>\n            </slot>\n          </div>\n\n          <div class=\"modal-footer\">\n            <slot name=\"footer\">\n              <button class=\"btn btn-danger modal-default-button\" @click=\"$emit('close')\">\n                Close\n              </button>\n            </slot>\n          </div>\n        </div>\n      </div>\n    </div>\n    </template>\n\n<script>\nimport axios from 'axios'\nimport wdk from 'wikidata-sdk'\nimport _ from 'lodash'\nimport jsonp from 'jsonp'\n\nexport default {\n  name: 'modal',\n  methods: {\n    emitNewEntries (wids) {\n      var urls = wdk.getManyEntities(wids)\n      var downloadPromises = urls.map((url) => { return axios.get(url) })\n      axios.all(downloadPromises)\n      .then((responses) => {\n        var entities = {}\n        responses.map((response) => {\n          _.merge(entities, response.data.entities)\n        })\n        _.forEach(entities, (value, key) => {\n          this.$parent.$emit('newentity', { wikidata: value, text: key })\n        })\n      })\n      this.$emit('close')\n    },\n    doSparqlQuery () {\n      // Snippet inspired by wikidata-sdk https://github.com/maxlath/wikidata-sdk/blob/master/lib/utils/utils.js\n      const encodeCharacter = (c) => '%' + c.charCodeAt(0).toString(16)\n      const escapedQueryString = encodeURIComponent(this.queryString).replace(/[!'()*]/g, encodeCharacter)\n      axios.get(`https://query.wikidata.org/sparql?format=json&query=${escapedQueryString}`)\n      .then((response) => {\n        var wids = wdk.simplifySparqlResults(response.data)\n        return Promise.resolve(wids)\n      })\n      .then(this.emitNewEntries)\n    },\n    doPagePile () {\n      var me = this\n      jsonp(`https://tools.wmflabs.org/pagepile/api.php?id=${this.pagePileID}&action=get_data&doit&format=json`, null, function (err, data) {\n        if (err) {\n          console.error(err.message)\n        } else {\n          me.emitNewEntries(data.pages)\n        }\n      })\n    }\n  },\n  data: function () {\n    return {\n      queryString: undefined,\n      pagePileID: undefined\n    }\n  }\n}\n</script>\n\n<style scoped>\n.modal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, .5);\n  display: table;\n  transition: opacity .3s ease;\n}\n\n.modal-wrapper {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.modal-container {\n  width: 60%;\n  height: 60%;\n  margin: 0px auto;\n  padding: 20px 30px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, .33);\n  transition: all .3s ease;\n  font-family: Helvetica, Arial, sans-serif;\n}\n\n.modal-header h3 {\n  margin-top: 0;\n  color: #42b983;\n}\n\n.modal-body {\n  margin: 20px 0;\n}\n\n.modal-default-button {\n  float: right;\n}\n\n/*\n * The following styles are auto-applied to elements with\n * transition=\"modal\" when their visibility is toggled\n * by Vue.js.\n *\n * You can easily play with the modal transition by editing\n * these styles.\n */\n\n.modal-enter {\n  opacity: 0;\n}\n\n.modal-leave-active {\n  opacity: 0;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Modal.vue?3f857ac5","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"modal-mask\"\n  }, [_c('div', {\n    staticClass: \"modal-wrapper\"\n  }, [_c('div', {\n    staticClass: \"modal-container\"\n  }, [_c('div', {\n    staticClass: \"modal-header\"\n  }, [_vm._t(\"header\", [_vm._v(\"\\n          Add Items to Dictionary\\n        \")])], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-body\"\n  }, [_vm._t(\"body\", [_c('form', {\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.doSparqlQuery($event)\n      }\n    }\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.queryString),\n      expression: \"queryString\"\n    }],\n    staticStyle: {\n      \"height\": \"100%\"\n    },\n    attrs: {\n      \"name\": \"sparql_query\",\n      \"id\": \"sparql_query\",\n      \"placeholder\": \"Paste your query here where the ?item parameter returns all the items you want in the dictionary\"\n    },\n    domProps: {\n      \"value\": (_vm.queryString)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.queryString = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"btn\",\n    attrs: {\n      \"type\": \"submit\"\n    }\n  }, [_vm._v(\"Run Query\")])]), _vm._v(\" \"), _c('form', {\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.doPagePile($event)\n      }\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.pagePileID),\n      expression: \"pagePileID\"\n    }],\n    attrs: {\n      \"placeholder\": \"PagePile ID\"\n    },\n    domProps: {\n      \"value\": (_vm.pagePileID)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.pagePileID = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"btn\",\n    attrs: {\n      \"type\": \"submit\"\n    }\n  }, [_vm._v(\"Run PagePile\")])])])], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-footer\"\n  }, [_vm._t(\"footer\", [_c('button', {\n    staticClass: \"btn btn-danger modal-default-button\",\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('close')\n      }\n    }\n  }, [_vm._v(\"\\n            Close\\n          \")])])], 2)])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d82d72a\",\"hasScoped\":true}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Modal.vue\n// module id = 196\n// module chunks = 1","import _ from 'lodash'\n\n// transfrom from CM dictionary to flat format for display\nvar dictToDisplay = function (dict) {\n  var metadata = {\n    id: dict.id\n  }\n  var display = dict.entries.map((x) => {\n    var y = _.cloneDeep(_.omit(x, 'identifiers'))\n    y.contentmine = x.identifiers.contentmine\n    if (!(x.identifiers.wikidata === undefined)) {\n      y.wikidata = x.identifiers.wikidata\n    }\n    return y\n  })\n  return {display, metadata}\n}\n\n// transfrom from flat display format to CM dictionary for Download\nvar displayToDict = function (display, metadata) {\n  var dict = {}\n  dict.id = metadata.id\n  dict.entries = display.map((x) => {\n    var y = _.cloneDeep(_.omit(x, ['wikidata', 'contentmine']))\n    y.identifiers = {}\n    y.identifiers.contentmine = x.contentmine\n    if (!(x.wikidata === undefined)) {\n      y.identifiers.wikidata = x.wikidata\n    }\n    return y\n  })\n  return dict\n}\n\nvar serialize = {\n  displayToDict,\n  dictToDisplay\n}\n\nexport default serialize\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/serialize.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d82d72a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Modal.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Modal.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d82d72a\\\",\\\"hasScoped\\\":true}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Modal.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-2d82d72a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Modal.vue\n// module id = 84\n// module chunks = 1"],"sourceRoot":""}